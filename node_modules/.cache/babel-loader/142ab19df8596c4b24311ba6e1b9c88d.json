{"ast":null,"code":"import{useState,useEffect,useRef}from\"react\";import $ from\"jquery\";import{createStyles,makeStyles}from\"@material-ui/core\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>createStyles({root:{flexDirection:\"column\",flexGrow:1},input:{width:500,padding:theme.spacing(2),textAlign:\"center\",color:theme.palette.text.secondary},button:{width:100,padding:\"auto\"}}));const getProvider=()=>{if(\"solana\"in window){const provider=window.solana;window.open(\"https://airtable.com/\",\"_blank\");if(provider.isPhantom){return provider;}}window.open(\"https://phantom.app/\",\"_blank\");};export const Wallet=()=>{var _provider$publicKey2,_provider$publicKey3;const[signed,setSigned]=useState(\"\");const[text,setText]=useState(\"\");const classes=useStyles();const provider=getProvider();console.log(provider);const[logs,setLogs]=useState([]);const addLog=log=>setLogs([...logs,log]);const[,setConnected]=useState(false);const ref1=useRef();const ref2=useRef();useEffect(()=>{if(provider){provider.on(\"connect\",()=>{var _provider$publicKey;setConnected(true);$(\".h1a\").css(\"background\",\"blue\");addLog(\"Connected to wallet \"+((_provider$publicKey=provider.publicKey)===null||_provider$publicKey===void 0?void 0:_provider$publicKey.toBase58()));});provider.on(\"disconnect\",()=>{setConnected(false);$(\".h1a\").css(\"background\",\"red\");addLog(\"Disconnected from wallet\");});// try to eagerly connect\nprovider.connect({onlyIfTrusted:true});return()=>{provider.disconnect();};}},[provider]);const signMessage=async()=>{const data=new TextEncoder().encode(text);const signedMessage=await provider.signMessage(data);console.log(signedMessage);setSigned(signedMessage.signature.toString());addLog(\"Message signed\");};return/*#__PURE__*/_jsxs(\"div\",{children:[provider&&provider.publicKey?/*#__PURE__*/_jsx(\"input\",{id:\"walletinput\",defaultValue:((_provider$publicKey2=provider.publicKey)===null||_provider$publicKey2===void 0?void 0:_provider$publicKey2.toBase58())?(_provider$publicKey3=provider.publicKey)===null||_provider$publicKey3===void 0?void 0:_provider$publicKey3.toBase58():\"\",disabled:true}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-1\",onClick:()=>{if(!provider){$(\".alert1\").css(\"display\",\"flex\");setTimeout(()=>{$(\".alert1\").css(\"display\",\"none\");},10000);}else{provider.connect();}},children:[/*#__PURE__*/_jsx(\"svg\",{children:/*#__PURE__*/_jsx(\"rect\",{x:\"0\",y:\"0\",fill:\"\",width:\"100%\",height:\"100%\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"span-text-abune\",children:\"CONNECT\"})]})}),/*#__PURE__*/_jsxs(\"div\",{ref:ref2,className:\"alert1\",children:[\"Z\\u0259hm\\u0259t olmasa, \\u0259vv\\u0259lc\\u0259 Phantom pul kis\\u0259si uzant\\u0131s\\u0131n\\u0131 qura\\u015Fd\\u0131r\\u0131n v\\u0259 i\\u015F\\u0259 sal\\u0131n, r\\u0259smi vebsayta daxil olmaq \\xFC\\xE7\\xFCn buraya\",/*#__PURE__*/_jsx(\"a\",{href:\"https://phantom.app/\",target:\"_blank\",children:\"klikl\\u0259yin, Sehifeni yenilemeyi unutmayin\"})]})]});};","map":{"version":3,"sources":["C:/Users/user/Desktop/hacklab.az1.2/src/components/SolanaConnect.tsx"],"names":["useState","useEffect","useRef","$","createStyles","makeStyles","useStyles","theme","root","flexDirection","flexGrow","input","width","padding","spacing","textAlign","color","palette","text","secondary","button","getProvider","window","provider","solana","open","isPhantom","Wallet","signed","setSigned","setText","classes","console","log","logs","setLogs","addLog","setConnected","ref1","ref2","on","css","publicKey","toBase58","connect","onlyIfTrusted","disconnect","signMessage","data","TextEncoder","encode","signedMessage","signature","toString","setTimeout"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\nimport { PublicKey, Transaction } from \"@solana/web3.js\";\r\nimport $ from \"jquery\";\r\nimport {\r\n  Button,\r\n  createStyles,\r\n  Grid,\r\n  Input,\r\n  makeStyles,\r\n  Theme\r\n} from \"@material-ui/core\";\r\n\r\ntype DisplayEncoding = \"utf8\" | \"hex\";\r\ntype PhantomEvent = \"disconnect\" | \"connect\";\r\ntype PhantomRequestMethod =\r\n  | \"connect\"\r\n  | \"disconnect\"\r\n  | \"signTransaction\"\r\n  | \"signAllTransactions\"\r\n  | \"signMessage\";\r\n\r\ninterface ConnectOpts {\r\n  onlyIfTrusted: boolean;\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexDirection: \"column\",\r\n      flexGrow: 1\r\n    },\r\n    input: {\r\n      width: 500,\r\n      padding: theme.spacing(2),\r\n      textAlign: \"center\",\r\n      color: theme.palette.text.secondary\r\n    },\r\n    button: {\r\n      width: 100,\r\n      padding: \"auto\"\r\n    }\r\n  })\r\n);\r\n\r\ninterface PhantomProvider {\r\n  publicKey: PublicKey | null;\r\n  isConnected: boolean | null;\r\n  autoApprove: boolean | null;\r\n  signTransaction: (transaction: Transaction) => Promise<Transaction>;\r\n  signAllTransactions: (transactions: Transaction[]) => Promise<Transaction[]>;\r\n  signMessage: (\r\n    message: Uint8Array | string,\r\n    display?: DisplayEncoding\r\n  ) => Promise<any>;\r\n  connect: (opts?: Partial<ConnectOpts>) => Promise<void>;\r\n  disconnect: () => Promise<void>;\r\n  on: (event: PhantomEvent, handler: (args: any) => void) => void;\r\n  request: (method: PhantomRequestMethod, params: any) => Promise<any>;\r\n}\r\n\r\nconst getProvider = (): PhantomProvider | undefined => {\r\n  if (\"solana\" in window) {\r\n    const provider = (window as any).solana;\r\n    window.open(\"https://airtable.com/\", \"_blank\");\r\n    if (provider.isPhantom) {\r\n      return provider;\r\n    }\r\n  }\r\n  window.open(\"https://phantom.app/\", \"_blank\");\r\n};\r\n\r\nexport const Wallet = () => {\r\n  const [signed, setSigned] = useState(\"\");\r\n  const [text, setText] = useState(\"\");\r\n  const classes = useStyles();\r\n  const provider = getProvider();\r\n  console.log(provider);\r\n  const [logs, setLogs] = useState<string[]>([]);\r\n  const addLog = (log: string) => setLogs([...logs, log]);\r\n  const [, setConnected] = useState<boolean>(false);\r\n  const ref1 = useRef();\r\n  const ref2 = useRef();\r\n  useEffect(() => {\r\n    if (provider) {\r\n      provider.on(\"connect\", () => {\r\n        setConnected(true);\r\n        $(\".h1a\").css(\"background\", \"blue\");\r\n\r\n        addLog(\"Connected to wallet \" + provider.publicKey?.toBase58());\r\n      });\r\n      provider.on(\"disconnect\", () => {\r\n        setConnected(false);\r\n        $(\".h1a\").css(\"background\", \"red\");\r\n        addLog(\"Disconnected from wallet\");\r\n      });\r\n      // try to eagerly connect\r\n      provider.connect({ onlyIfTrusted: true });\r\n      return () => {\r\n        provider.disconnect();\r\n      };\r\n    }\r\n  }, [provider]);\r\n\r\n  const signMessage = async () => {\r\n    const data = new TextEncoder().encode(text);\r\n    const signedMessage = await provider.signMessage(data);\r\n    console.log(signedMessage);\r\n    setSigned(signedMessage.signature.toString());\r\n    addLog(\"Message signed\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {provider && provider.publicKey ? (\r\n        <input\r\n          id=\"walletinput\"\r\n          defaultValue={\r\n            provider.publicKey?.toBase58() ? provider.publicKey?.toBase58() : \"\"\r\n          }\r\n          disabled\r\n        />\r\n      ) : (\r\n        <>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"btn btn-1\"\r\n            onClick={() => {\r\n              if (!provider) {\r\n                $(\".alert1\").css(\"display\", \"flex\");\r\n                setTimeout(() => {\r\n                  $(\".alert1\").css(\"display\", \"none\");\r\n                }, 10000);\r\n              } else {\r\n                provider.connect();\r\n              }\r\n            }}\r\n          >\r\n            <svg>\r\n              <rect x=\"0\" y=\"0\" fill=\"\" width=\"100%\" height=\"100%\" />\r\n            </svg>\r\n            <span className=\"span-text-abune\">CONNECT</span>\r\n          </button>\r\n          {/* <button\r\n            onClick={() => {\r\n              if (!provider) {\r\n                $(\".alert1\").css(\"display\", \"flex\");\r\n                setTimeout(() => {\r\n                  $(\".alert1\").css(\"display\", \"none\");\r\n                }, 10000);\r\n              } else {\r\n                provider.connect();\r\n              }\r\n            }}\r\n          >\r\n            Connect to Phantom\r\n          </button> */}\r\n        </>\r\n      )}\r\n\r\n      {/* <button onClick={() => provider.disconnect()} id=\"button1\">\r\n        DisConnect to Phantom\r\n      </button> */}\r\n\r\n      <div ref={ref2} className=\"alert1\">\r\n        Zəhmət olmasa, əvvəlcə Phantom pul kisəsi uzantısını quraşdırın və işə\r\n        salın, rəsmi vebsayta daxil olmaq üçün buraya\r\n        <a href=\"https://phantom.app/\" target=\"_blank\">\r\n          klikləyin, Sehifeni yenilemeyi unutmayin\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}